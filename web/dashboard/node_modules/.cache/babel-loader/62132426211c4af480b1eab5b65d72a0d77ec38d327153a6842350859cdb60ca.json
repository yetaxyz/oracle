{"ast":null,"code":"var _jsxFileName = \"/root/oracle/web/dashboard/src/components/PriceTable.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, CircularProgress, Box, Typography } from '@mui/material';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SYMBOLS = ['BTCUSDT', 'ETHUSDT', 'BNBUSDT', 'XRPUSDT', 'ADAUSDT'];\nconst API_BASE_URL = window.location.hostname === 'localhost' ? 'http://localhost:8080' : `http://${window.location.hostname}:8080`;\nconst PriceTable = () => {\n  _s();\n  const [prices, setPrices] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchPrices = async () => {\n      try {\n        // Fetch prices for all symbols in parallel\n        const requests = SYMBOLS.map(symbol => axios.get(`${API_BASE_URL}/api/v1/prices/${symbol}`));\n        const responses = await Promise.all(requests);\n        const formattedPrices = responses.map(response => ({\n          id: response.data.symbol.toLowerCase(),\n          name: response.data.symbol,\n          price: response.data.price,\n          lastUpdated: new Date(response.data.timestamp).toLocaleString()\n        }));\n        setPrices(formattedPrices);\n        setError(null);\n      } catch (error) {\n        console.error('Error fetching prices from oracle:', error);\n        setError('Failed to fetch cryptocurrency prices from oracle. Please ensure the oracle server is running.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPrices();\n    const interval = setInterval(fetchPrices, 10000); // Update every 10 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      my: 4,\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      my: 4,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        color: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    elevation: 3,\n    sx: {\n      p: 2\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      gutterBottom: true,\n      sx: {\n        mb: 3\n      },\n      children: \"Oracle Price Feed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Symbol\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"right\",\n              children: \"Price (USD)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"right\",\n              children: \"Last Updated\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          children: prices.map(row => /*#__PURE__*/_jsxDEV(TableRow, {\n            hover: true,\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              component: \"th\",\n              scope: \"row\",\n              children: row.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"right\",\n              children: [\"$\", row.price.toLocaleString(undefined, {\n                minimumFractionDigits: 2,\n                maximumFractionDigits: 2\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"right\",\n              children: row.lastUpdated\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 17\n            }, this)]\n          }, row.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(PriceTable, \"B5O9ueZM5Rr8T84vAKNhhv0wA1g=\");\n_c = PriceTable;\nexport default PriceTable;\nvar _c;\n$RefreshReg$(_c, \"PriceTable\");","map":{"version":3,"names":["React","useState","useEffect","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","CircularProgress","Box","Typography","axios","jsxDEV","_jsxDEV","SYMBOLS","API_BASE_URL","window","location","hostname","PriceTable","_s","prices","setPrices","loading","setLoading","error","setError","fetchPrices","requests","map","symbol","get","responses","Promise","all","formattedPrices","response","id","data","toLowerCase","name","price","lastUpdated","Date","timestamp","toLocaleString","console","interval","setInterval","clearInterval","display","justifyContent","my","children","fileName","_jsxFileName","lineNumber","columnNumber","color","elevation","sx","p","variant","gutterBottom","mb","align","row","hover","component","scope","undefined","minimumFractionDigits","maximumFractionDigits","_c","$RefreshReg$"],"sources":["/root/oracle/web/dashboard/src/components/PriceTable.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  CircularProgress,\n  Box,\n  Typography,\n} from '@mui/material';\nimport axios from 'axios';\n\nconst SYMBOLS = ['BTCUSDT', 'ETHUSDT', 'BNBUSDT', 'XRPUSDT', 'ADAUSDT'];\nconst API_BASE_URL = window.location.hostname === 'localhost' ? 'http://localhost:8080' : `http://${window.location.hostname}:8080`;\n\nconst PriceTable = () => {\n  const [prices, setPrices] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchPrices = async () => {\n      try {\n        // Fetch prices for all symbols in parallel\n        const requests = SYMBOLS.map(symbol =>\n          axios.get(`${API_BASE_URL}/api/v1/prices/${symbol}`)\n        );\n        \n        const responses = await Promise.all(requests);\n        const formattedPrices = responses.map(response => ({\n          id: response.data.symbol.toLowerCase(),\n          name: response.data.symbol,\n          price: response.data.price,\n          lastUpdated: new Date(response.data.timestamp).toLocaleString(),\n        }));\n\n        setPrices(formattedPrices);\n        setError(null);\n      } catch (error) {\n        console.error('Error fetching prices from oracle:', error);\n        setError('Failed to fetch cryptocurrency prices from oracle. Please ensure the oracle server is running.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPrices();\n    const interval = setInterval(fetchPrices, 10000); // Update every 10 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" my={4}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" my={4}>\n        <Typography color=\"error\">{error}</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Paper elevation={3} sx={{ p: 2 }}>\n      <Typography variant=\"h5\" gutterBottom sx={{ mb: 3 }}>\n        Oracle Price Feed\n      </Typography>\n      <TableContainer>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Symbol</TableCell>\n              <TableCell align=\"right\">Price (USD)</TableCell>\n              <TableCell align=\"right\">Last Updated</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {prices.map((row) => (\n              <TableRow key={row.id} hover>\n                <TableCell component=\"th\" scope=\"row\">\n                  {row.name}\n                </TableCell>\n                <TableCell align=\"right\">\n                  ${row.price.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n                </TableCell>\n                <TableCell align=\"right\">\n                  {row.lastUpdated}\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Paper>\n  );\n};\n\nexport default PriceTable; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}